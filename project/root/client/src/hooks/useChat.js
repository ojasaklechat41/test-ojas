Custom hook for managing chat state